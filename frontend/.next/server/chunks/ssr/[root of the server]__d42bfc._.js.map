{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/nikit/Downloads/supersoul/frontend/pages/_document.tsx"],"sourcesContent":["import { Html, Head, Main, NextScript } from \"next/document\";\n\nexport default function Document() {\n  return (\n    <Html lang=\"en\">\n      <Head />\n      <body className=\"antialiased\">\n        <Main />\n        <NextScript />\n      </body>\n    </Html>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS;IACtB,qBACE,qKAAC,yHAAA,CAAA,OAAI;QAAC,MAAK;;0BACT,qKAAC,yHAAA,CAAA,OAAI;;;;;0BACL,qKAAC;gBAAK,WAAU;;kCACd,qKAAC,yHAAA,CAAA,OAAI;;;;;kCACL,qKAAC,yHAAA,CAAA,aAAU;;;;;;;;;;;;;;;;;AAInB"}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/nikit/Downloads/supersoul/frontend/pages/_app.tsx"],"sourcesContent":["import \"@/styles/globals.css\";\nimport type { AppProps } from \"next/app\";\n\nexport default function App({ Component, pageProps }: AppProps) {\n  return <Component {...pageProps} />;\n}\n"],"names":[],"mappings":";;;;;;AAGe,SAAS,IAAI,EAAE,SAAS,EAAE,SAAS,EAAY;IAC5D,qBAAO,qKAAC;QAAW,GAAG,SAAS;;;;;;AACjC"}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/nikit/Downloads/supersoul/frontend/pages/meeting/%5Bid%5D.tsx"],"sourcesContent":["import { useRouter } from \"next/router\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport Peer from \"peerjs\";\r\n\r\nconst MeetingPage = () => {\r\n  const router = useRouter();\r\n  const { id: meetingId } = router.query;\r\n  const [peer, setPeer] = useState<Peer | null>(null);\r\n  const [socket, setSocket] = useState<WebSocket | null>(null);\r\n  const [meetingLink, setMeetingLink] = useState<string | null>(null);\r\n  const [copied, setCopied] = useState(false);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [localStream, setLocalStream] = useState<MediaStream | null>(null);\r\n  const [isVideoOff, setIsVideoOff] = useState(false);\r\n  const myVideoRef = useRef<HTMLVideoElement>(null);\r\n  const remoteVideosRef = useRef<{ [key: string]: HTMLVideoElement }>({});\r\n\r\n  useEffect(() => {\r\n    if (!meetingId) return;\r\n\r\n    const websocketURL = process.env.NEXT_PUBLIC_WEBSOCKET_URL || \"ws://localhost:8000\";\r\n    const userPeerId = Math.random().toString(36).substring(7);\r\n    const newSocket = new WebSocket(`${websocketURL}/ws/${meetingId}/${userPeerId}`);\r\n    navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n    .then((stream) => {\r\n      setLocalStream(stream); \r\n      if (myVideoRef.current) {\r\n        myVideoRef.current.srcObject = stream;\r\n      }\r\n    })\r\n  .catch((error) => console.error(\"âŒ Camera/Microphone Error:\", error));\r\n\r\n    newSocket.onopen = () => {\r\n        console.log(\"âœ… WebSocket Connected!\");\r\n        newSocket.send(JSON.stringify({ type: \"new-user\", peerId: userPeerId })); // âœ… Now it's safe to send\r\n    };\r\n\r\n    newSocket.onmessage = (event) => {\r\n        const data = JSON.parse(event.data);\r\n        console.log(\"ðŸ“© WebSocket Message:\", data);\r\n\r\n        if (data.type === \"new-user\" && data.peerId !== userPeerId) {\r\n            console.log(`ðŸ”” New participant joined: ${data.peerId}`);\r\n            callUser(data.peerId);\r\n        }\r\n    };\r\n\r\n    newSocket.onerror = (error) => {\r\n        console.error(\"âŒ WebSocket Error:\", error);\r\n    };\r\n\r\n    newSocket.onclose = () => {\r\n        console.log(\"âŒ WebSocket Closed!\");\r\n    };\r\n\r\n    setSocket(newSocket);\r\n\r\n    return () => {\r\n        newSocket.close();\r\n    };\r\n}, [meetingId]);\r\n\r\n\r\n  const callUser = (remotePeerId: string) => {\r\n    if (!peer || !localStream) return;\r\n    console.log(`Calling user: ${remotePeerId}`);\r\n    const call = peer.call(remotePeerId, localStream);\r\n    call.on(\"stream\", (remoteStream) => {\r\n      console.log(\"Received Remote Stream\");\r\n      addRemoteVideo(remotePeerId, remoteStream);\r\n    });\r\n  };\r\n\r\n  const addRemoteVideo = (peerId: string, stream: MediaStream) => {\r\n    console.log(`Adding video for: ${peerId}`);\r\n    if (!remoteVideosRef.current[peerId]) {\r\n      const videoElement = document.createElement(\"video\");\r\n      videoElement.srcObject = stream;\r\n      videoElement.autoplay = true;\r\n      videoElement.playsInline = true;\r\n      videoElement.classList.add(\"w-48\", \"h-32\", \"rounded-lg\", \"border\");\r\n      document.getElementById(\"remote-videos\")?.appendChild(videoElement);\r\n      remoteVideosRef.current[peerId] = videoElement;\r\n    }\r\n  };\r\n\r\n  const copyLink = () => {\r\n    if (meetingLink) {\r\n      navigator.clipboard.writeText(meetingLink);\r\n      setCopied(true);\r\n      setTimeout(() => setCopied(false), 2000);\r\n    }\r\n  };\r\n\r\n  const toggleMute = () => {\r\n    if (!myVideoRef.current || !myVideoRef.current.srcObject) return;\r\n\r\n    const stream = myVideoRef.current.srcObject as MediaStream;\r\n    const audioTracks = stream.getAudioTracks();\r\n\r\n    if (audioTracks.length > 0) {\r\n      audioTracks[0].enabled = !audioTracks[0].enabled;\r\n      setIsMuted(!audioTracks[0].enabled);\r\n    }\r\n  };\r\n\r\n  const toggleVideo = () => {\r\n    if (!myVideoRef.current || !myVideoRef.current.srcObject) return;\r\n\r\n    const stream = myVideoRef.current.srcObject as MediaStream;\r\n    const videoTracks = stream.getVideoTracks();\r\n\r\n    if (videoTracks.length > 0) {\r\n      videoTracks[0].enabled = !videoTracks[0].enabled;\r\n      setIsVideoOff(!videoTracks[0].enabled);\r\n    }\r\n  };\r\n\r\n  const leaveMeeting = () => {\r\n    if (socket) socket.close();\r\n    if (peer) peer.destroy();\r\n    router.push(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center h-screen\">\r\n      <h2 className=\"text-xl font-bold\">Meeting ID: {meetingId}</h2>\r\n\r\n      {meetingLink && (\r\n        <div className=\"flex flex-col items-center space-y-2 mt-4 bg-white p-4 rounded-lg shadow-lg\">\r\n          <p className=\"text-lg font-semibold\">Share this link:</p>\r\n          <div className=\"flex items-center space-x-2 border p-2 rounded-md w-full\">\r\n            <span className=\"truncate w-64\">{meetingLink}</span>\r\n            <button\r\n              className=\"bg-green-500 text-white px-3 py-1 rounded-md hover:bg-green-600\"\r\n              onClick={copyLink}\r\n            >\r\n              {copied ? \"Copied!\" : \"Copy\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex space-x-4 mt-4\">\r\n        <video ref={myVideoRef} autoPlay muted className=\"w-48 h-32 border rounded-lg\" />\r\n        <div id=\"remote-videos\" className=\"flex space-x-2\"></div>\r\n      </div>\r\n      <div className=\"flex space-x-4 mt-6\">\r\n        <button\r\n          onClick={toggleMute}\r\n          className=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\r\n        >\r\n          {isMuted ? \"Unmute Mic\" : \"Mute Mic\"}\r\n        </button>\r\n\r\n        <button\r\n          onClick={toggleVideo}\r\n          className=\"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600\"\r\n        >\r\n          {isVideoOff ? \"Turn On Camera\" : \"Turn Off Camera\"}\r\n        </button>\r\n\r\n        <button\r\n          onClick={leaveMeeting}\r\n          className=\"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600\"\r\n        >\r\n          Leave Call\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MeetingPage;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}